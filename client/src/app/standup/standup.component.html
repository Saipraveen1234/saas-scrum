<div class="max-w-full mx-auto">
  <!-- AI Summary Card -->
  <div
    class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6 text-white shadow-lg mb-8 transition-all"
  >
    <div class="flex justify-between items-center mb-4">
      <h2 class="font-bold text-lg flex items-center gap-2">
        âœ¨ AI Insight
      </h2>
      <button
        (click)="getAiSummary()"
        [disabled]="isLoading"
        class="bg-white text-indigo-600 px-4 py-2 rounded-lg font-bold text-sm hover:bg-indigo-50 transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {{ isLoading ? 'Thinking...' : 'Generate Report' }}
      </button>
    </div>

    <!-- AI Output Area -->
    <div
      *ngIf="summary"
      class="bg-white/10 p-4 rounded-lg backdrop-blur-sm text-sm leading-relaxed whitespace-pre-line animate-in fade-in duration-500"
    >
      {{ summary }}
    </div>
    <div *ngIf="!summary" class="text-indigo-100 text-sm italic">
      Click the button to generate a Team Lead summary of today's updates.
    </div>
  </div>

  <div class="max-w-4xl mx-auto">
    <!-- Feed Header -->
    <div class="flex justify-between items-center mb-6">
      <h3 class="font-bold text-slate-700 flex items-center gap-2 text-xl">
        Team Feed
        <span
          class="bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full text-xs"
          >{{ filteredStandups.length }}</span
        >
      </h3>
      
      <div class="flex items-center gap-2">
        <button
          (click)="setToday()"
          [class.bg-indigo-600]="isToday()"
          [class.text-white]="isToday()"
          [class.bg-slate-100]="!isToday()"
          [class.text-slate-600]="!isToday()"
          class="px-3 py-1.5 rounded-lg text-sm font-medium transition"
        >
          Today
        </button>
        <input
          type="date"
          [(ngModel)]="selectedDate"
          (ngModelChange)="onDateChange()"
          class="border border-slate-300 px-3 py-1.5 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none"
        />
      </div>
    </div>

    <!-- Empty State -->
    <div
      *ngIf="filteredStandups.length === 0"
      class="text-center py-12 text-slate-400 bg-slate-50 rounded-xl border border-slate-200 border-dashed"
    >
      <p>No updates for {{ selectedDate | date : 'mediumDate' }}.</p>
    </div>

    <!-- Feed Items -->
    <div class="space-y-4">
      <div
        *ngFor="let update of filteredStandups"
        class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow"
      >
        <div
          class="flex justify-between items-start mb-4 border-b border-slate-50 pb-3"
        >
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-sm font-bold"
            >
              {{ update.user_name.charAt(0) | uppercase }}
            </div>
            <div>
              <div class="font-bold text-slate-900">{{ update.user_name }}</div>
              <div class="text-xs text-slate-500">Team Member</div>
            </div>
          </div>
          <div class="text-right">
            <div class="text-sm text-slate-600 font-medium">
              {{ update.created_at | date : 'mediumDate' }}
            </div>
            <div class="text-xs text-slate-400 font-mono">
              {{ update.created_at | date : 'shortTime' }}
            </div>
          </div>
        </div>

        <div class="space-y-4 text-sm">
          <div class="grid grid-cols-[100px_1fr] gap-4">
            <span class="font-bold text-slate-400 text-xs uppercase pt-1 tracking-wider"
              >Completed</span
            >
            <p class="text-slate-700 leading-relaxed">{{ update.yesterday }}</p>
          </div>
          <div class="grid grid-cols-[100px_1fr] gap-4">
            <span class="font-bold text-indigo-500 text-xs uppercase pt-1 tracking-wider"
              >In Progress</span
            >
            <p class="text-slate-900 font-medium leading-relaxed">{{ update.today }}</p>
          </div>
          <div
            *ngIf="update.blockers && update.blockers !== 'None'"
            class="grid grid-cols-[100px_1fr] gap-4 bg-red-50 p-3 rounded-lg -mx-3"
          >
            <span class="font-bold text-red-500 text-xs uppercase pt-1 tracking-wider pl-3"
              >Blockers</span
            >
            <p class="text-red-700 font-medium">{{ update.blockers }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
